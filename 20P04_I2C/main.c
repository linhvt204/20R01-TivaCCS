/******************************************************************************
 * Name of files:   20P04_I2C
 * Description:
 *
 * Linh Vu - vu.t.linh204.work@gmail.com
 * Gradute Student
 * January 2020
 * Built with CCS v.9.2

 *******************************************************************************/

/*******************************************************************************
 *                              Includes  & Defines
 *******************************************************************************/
//  #include <example.h>
#include <user_init/InitInc.h>
//  Defines
#define ADXL345_I2C_ADDRESS 0x53
/*******************************************************************************
 *                              Global Variables
 *******************************************************************************/
uint32_t X_out, Y_out, Z_out;

/*******************************************************************************
 *                              Function Prototypes
 *******************************************************************************/
void Init_ADXL345(void);
/*******************************************************************************
 *                              Main Program
 *******************************************************************************/

int main(void)
{
    Init_SysCtl(80);
    PinoutSet();
    Init_I2C0();
    Init_ADXL345();
    while (1)
    {
        X_out = I2CReceive(ADXL345_I2C_ADDRESS, 0x32);
        Y_out = I2CReceive(ADXL345_I2C_ADDRESS, 0x33);
        Z_out = I2CReceive(ADXL345_I2C_ADDRESS, 0x34);
        delay_s(1);
    }
}

/*******************************************************************************
 *                              Function Definition
 *******************************************************************************/
void Init_ADXL345(void)
{
I2CSend(ADXL345_I2C_ADDRESS, 1, 0x32);
I2CSend(ADXL345_I2C_ADDRESS, 1, 0x08);
}
