/*******************************************************************************
 *  Name of files:  InitPWM.c
 *  Description:
 *
 * Linh Vu - vu.t.linh204.work@gmail.com
 * Freelance
 * October 2019
 * Built with CCS v.9.2

 ********************************************************************************/

#include <stdio.h>
#include <stdint.h>
#include <stdbool.h>
#include <user_init/InitPWM.h>

#include "driverlib/pwm.h"

// Specified output initialize on PF1, PF2, and PF3.
void Init_PWM1(void)
{
    SysCtlPeripheralEnable(SYSCTL_PERIPH_PWM1);
    SysCtlPWMClockSet(SYSCTL_PWMDIV_1);

    PWMGenConfigure(PWM1_BASE, PWM_GEN_5, PWM_GEN_MODE_UP_DOWN | PWM_GEN_MODE_DB_NO_SYNC);
    PWMGenConfigure(PWM1_BASE, PWM_GEN_6, PWM_GEN_MODE_UP_DOWN | PWM_GEN_MODE_DB_NO_SYNC);
    PWMGenConfigure(PWM1_BASE, PWM_GEN_7, PWM_GEN_MODE_UP_DOWN | PWM_GEN_MODE_DB_NO_SYNC);

    PWMGenPeriodSet(PWM1_BASE, PWM_GEN_5, 800);
    PWMGenPeriodSet(PWM1_BASE, PWM_GEN_6, 800);
    PWMGenPeriodSet(PWM1_BASE, PWM_GEN_7, 800);

    PWMGenEnable(PWM1_BASE, PWM_GEN_5);
    PWMGenEnable(PWM1_BASE, PWM_GEN_6);
    PWMGenEnable(PWM1_BASE, PWM_GEN_7);

    PWMOutputState(PWM1_BASE, PWM_OUT_5_BIT | PWM_OUT_6_BIT | PWM_OUT_7_BIT, true);

    PWMPulseWidthSet(PWM0_BASE, PWM_OUT_5, PF1PWMPeriod);
    PWMPulseWidthSet(PWM0_BASE, PWM_OUT_6, PF2PWMPeriod);
    PWMPulseWidthSet(PWM0_BASE, PWM_OUT_7, PF3PWMPeriod);
}


