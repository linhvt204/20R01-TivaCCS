/*******************************************************************************
 *  Name of files:  InitSSI.c
 *  Description:
 *
 * Linh Vu - vu.t.linh204.work@gmail.com
 * Freelance
 * October 2019
 * Built with CCS v.9.2

Note: "Equal Symbol"
SCL SDA SDO
SSI0RX      SDI     PA4     MOSI    SDA
SSI0FSS     SS      PA3     FSS     CS
SSI0TX      DIN     PA5     MISO    SDO
SSI0CLK     SCLK    PA2     SCL     SCL     SCK

SDI slave -> SDO master
 ********************************************************************************/

#include <stdio.h>
#include <stdint.h>
#include <stdbool.h>
#include <user_init/InitSSI.h>

#include "driverlib/sysctl.h"
#include "driverlib/ssi.h"
#include "driverlib/rom_map.h"

void Init_SSI0(void)
{
    MAP_SysCtlPeripheralEnable(SYSCTL_PERIPH_SSI0);
    while(!(SysCtlPeripheralReady(SYSCTL_PERIPH_SSI0)))
          {
          }
    SSIConfigSetExpClk(SSI0_BASE, SysCtlClockGet(), SSI_FRF_MOTO_MODE_0, SSI_MODE_MASTER, 1000000, 16);
    SSIEnable(SSI0_BASE);
    SSIDataPut(SSI0_BASE, 0x0A0A);
    SysCtlDelay(13333);
    SSIDataPut(SSI0_BASE, 0x000F);
    SSIDataPut(SSI0_BASE, 0x000B);
    SSIDataPut(SSI0_BASE, 0x0009);
    SSIDataPut(SSI0_BASE, 0x0100);//clear
    SSIDataPut(SSI0_BASE, 0x010C);//shutdown address
    while(1){
      SSIDataPut(SSI0_BASE, 0xFF00);
//      SysCtlDelay((SysCtlClockGet()/1000*3)*1000);
      SysCtlDelay(133333);
      SSIDataPut(SSI0_BASE, 0x0000);
      SysCtlDelay(133333);
    }
}
